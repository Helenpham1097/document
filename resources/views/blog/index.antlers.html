{{# Template for blog index page #}}

<body>
    {{ partial:blog/nav }}
    {{# {{ partial:global/nav }} #}}
    {{# <div class="absolute w-full my-12 sm:my-0 h-1/2 sm:h-2/3 light-purple"></div> #}}
    <div class="slice-bg"></div>
    {{# Check for Stickied post  #}}
    {{ if stickied_post && (get:page == "1" || !get:page) }}

        {{ stickied_post }}
            {{ partial:blog/featured_post }}
        {{ /stickied_post }}

        {{# Non-featured posts. To enable pagination set true and change limit to 6 #}}
        {{ collection:blog limit="0" paginate="false" as="posts" sort="date:desc" id:isnt=stickied_post:id }}
            {{ partial:blog/post }}
            <!-- Paginator -->
            {{ partial:blog/paginate }}
        {{ /collection:blog }}

        {{ partial:blog/footer}}

    {{# If no stickied post use most recent post  #}}
    {{ else }}

        {{ collection:blog sort="date:desc" limit="1" }}
            {{ if get:page == "1" || !get:page }}
                {{ partial:blog/featured_post}}
            {{ /if }}
        {{ /collection:blog }}

        {{ collection:blog limit="6" paginate="true" as='posts' sort="date:desc" offset="1" }}
            {{ if posts && (get:page == "1" || !get:page) }}
                <div class="py-8 space-y-8">
            {{ else }}
                <div class="py-8 space-y-8 lg:pb-8 sm:space-y-16">
            {{ /if }}
                </div>
            <div class="container grid gap-x-8 gap-y-8 sm:grid-cols-2 lg:grid-cols-3 place-items-startgrid">
                {{ posts }}
                    {{ partial:blog/post }}
                {{ /posts }}	
            </div>
            <!-- Paginator -->
            {{ if {collection:count in="blog"} > 6 }}
                {{ partial:blog/paginate }}
            {{ /if }}
        {{ /collection:blog }}
        
    {{ /if }}
    
{{ partial:blog/footer }}
{{# {{ partial:global/footer }} #}}
</body>
