
<aside class="w-1/6 flex overflow-y-auto sticky top-2 flex-col pt-2 pb-6 h-[calc(100vh-5rem)]" id="table-of-contents">
    <div class="flex items-center pb-4 pl-5 pr-2 space-x-4 text-sm font-medium text-zinc-800 dark:text-white ">
        <span>ON THIS PAGE</span>
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
            <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25H12" />
        </svg>
    </div>
    <div id="sidebar" class="px-4">
        {{ content | toc }}
    </div>
</aside>



{{# <script>
    window.addEventListener("DOMContentLoaded", () => {
        const observer = new IntersectionObserver((entries) => {
            entries.forEach((entry) => {
                const id = entry.target.getAttribute("id");
                if (entry.intersectionRatio > 0) {
                    document.querySelector(`#sidebar a[href="#${id}"]`).classList.add("text-purple-500", "dark:text-green-500");
                } else {
                    document.querySelector(`#sidebar a[href="#${id}"]`).classList.remove("text-purple-500", "dark:text-green-500");
                }
            });
        });

        // Track all sections that have an `id` applied
        document.querySelectorAll("section[id], h2[id], h3[id]").forEach((section) => {
            observer.observe(section);
        });
    });
</script> #}}


<script>
    let lastId = null;

    window.addEventListener("DOMContentLoaded", () => {
        const observer = new IntersectionObserver((entries) => {
            entries.forEach((entry) => {
                const id = entry.target.getAttribute("id");
                if (entry.intersectionRatio > 0) {
                    document.querySelector(`#sidebar a[href="#${id}"]`).classList.add("text-purple-500", "dark:text-green-500");
                    if(lastId) {
                        document.querySelector(`#sidebar a[href="#${lastId}"]`).classList.remove("font-bold");
                    }
                    document.querySelector(`#sidebar a[href="#${id}"]`).classList.add("font-bold");
                    lastId = id;
                } else {
                    document.querySelector(`#sidebar a[href="#${id}"]`).classList.remove("text-purple-500", "dark:text-green-500");
                }
            });
        });

        // Track all sections that have an `id` applied
        document.querySelectorAll("section[id], h2[id], h3[id]").forEach((section) => {
            observer.observe(section);
        });
    });
</script>